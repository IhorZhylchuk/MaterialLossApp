@model Item
@{
    
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.13.5/css/jquery.dataTables.min.css" rel="stylesheet" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/css/bootstrapValidator.min.css" />
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css' rel='stylesheet'>

<style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    input[type=number] {
        -moz-appearance: textfield;
    }

    .modal-backdrop {
        opacity: 0.01 !important;
    }

    #formElement{
        padding:5px;
    }
</style>
        <div class="container" style="width:100%; margin-top:100px">
            <div class="form-group">
                <a style="margin-bottom: 10px; color: white" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#zlecenie">Dodaj zlecenie</a>
            </div>

            <div class="form-group">
                <table id="zlecenia" class="table table-striped table-bordered display" style="width:100%;margin-top:50px;">
                    <thead>
                        <tr>
                            <th style="text-align: center"></th>
                            <th id="valueBinNumber">Nr. zlecenia</th>
                            <th id="valueBinStatus">Nazwa produktu</th>
                            <th id="processName">Ilość (kg)</th>
                            <th></th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
        <div class="modal fade" id="zlecenie" backdrop="static" keyboard="false" tabindex="-1" aria-labelledby="title" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="title">Nowe zlecenie</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" id="closeNewZlecenie" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form asp-action="NoweZlecenie" method="Post" id="noweZlecenie">
                            <div class="modal-body">
                                <div class="form-group" id="formElement">
                                    <input class="form-control" type="number" placeholder="Numer zlecenia" required asp-for="NrZlecenia" min="2000000" max="3000000" id="nrZlecenia" />
                                    <span id="warning" style="color:red; font-size:small; font-style:normal"></span>
                                </div>
                                <div class="form-group" id="formElement">
                                    <select id="recipies" class="form-select" asp-items="@ViewBag.Recipies" required asp-for="RecipesName">
                                        <option value="-1" id="optionRecipie">Wybierz recepture</option>
                                    </select>
                                </div>
                                <div class="form-group" id="formElement">
                                    <input id="count" class="form-control" type="number" placeholder="Iłość (kg)" required min="500" max="3000" asp-for="Count" />
                                    <span id="warningCount" style="color:red; font-size:small; font-style:normal"></span>
                                </div>
                                <div class="form-group" id="formElement">
                                    <select id="opakowanie" class="form-select" asp-items="@ViewBag.Opakowania" required asp-for="Opakowanie">
                                        <option value="-1" id="optionOpakowanie">Wybierz opakowanie</option>
                                    </select>
                                </div>
                                <div class="form-group" id="formElement">
                                    <select id="dekel" class="form-select" asp-items="@ViewBag.Dekel" required asp-for="PokrywaNekrętka">
                                        <option value="-1" id="optionDekel">Pokrywa/Nakrętka</option>
                                    </select>
                                </div>
                                <div class="form-group" id="formElement">
                                    <select id="etykieta" class="form-select" asp-items="@ViewBag.Naklejka" required asp-for="Naklejka">
                                        <option value="-1" id="optionEtykieta">Etykieta</option>
                                    </select>
                                </div>
                                <div class="form-group" id="buttonsSection" style="padding:5px">
                                    <div class="col text-center">
                                        <input type="submit" value="Save" disabled id="submitButton" class="btn btn-primary" />
                                    </div>
                                    <span id="warningTextForOrder" style="color:red; font-size:small; font-style:normal"></span>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>








@section Scripts{
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>
    <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script>
            $(document).ready(function () {
                daTable = $('#zlecenia').DataTable({
                    dom: 'Bfrtip',
                    ajax: {
                        url: '/Home/GetZlecenia',
                        type: 'GET',
                        dataSrc: ''
                    },
                    rowId: 'Id',
                    order: [[1, 'asc']],
                    columnDefs: [
                        { className: 'dt-body-center', targets: [0, 1, 2, 3, 4] },
                        {
                            targets: [1, 2, 3, 4],
                            className: 'dt-head-center '
                        },
                        {
                            targets: 0,
                            width: '7%'
                        },
                        {
                            targets: [1, 2],
                            width: '25%'
                        },
                        {
                            targets: [3],
                            width: '13%'
                        },
                        {
                            targets: [4],
                            width: '30%'
                        }
                    ],
                    columns: [
                        { data: null, "sortable": false },
                        { data: "nrZlecenia" },
                        { data: "recipesName" },
                        { data: "count" },
                        {
                            data: "id", "render": function (data) {
                                return "<div style='width:100%; position: center'><div class='btn-group' role='group' id='groupButton'><a class='btn btn-success btn-small' style = 'height: 5%; margin-left: 5px; margin-right: 5px;' data-toggle='modal' onclick='Details(" + data + ")'>Szczegóły</a><a class='btn btn-danger btn-small' style='height: 5 %' onclick=Delete(" + data + ") id='Delete' >Usuń</a><a class='btn btn-warning btn-small' style = 'height: 5%; margin-left: 5px; margin-right: 5px;'  onclick=ChangeOrder(" + data + ") id='Delete' >Zmień</a></div ></div >"
                            },
                            orderable: false,
                            searchable: false,
                            width: "150px"
                        }
                    ]
                });
                $('#zlecenia').DataTable().on('order.dt search.dt', function () {
                    $('#zlecenia').DataTable().column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                        cell.innerHTML = i + 1;
                    });
                }).draw();
            })
    </script>
}